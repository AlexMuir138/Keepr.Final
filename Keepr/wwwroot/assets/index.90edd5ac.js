import{r as e,c as t,o as a,a as s,b as l,F as o,d as n,e as i,p as c,f as r,g as d,t as u,h as p,w as v,i as g,j as m,k as f,l as k,m as w,n as b,u as y,q as h}from"./vendor.55f09c39.js";const _=e({user:{},account:{},profile:{},vault:{},keeps:[],vaults:[],activeVault:null,activeKeep:null,activeProfile:null});const V={name:"App",setup:()=>({appState:t((()=>_))})};V.render=function(e,t,i,c,r,d){const u=n("Navbar"),p=n("router-view");return a(),s(o,null,[l("header",null,[l(u)]),l("main",null,[l(p)])],64)};const A=window.location.origin.includes("localhost"),K=A?"https://localhost:5001":"";function x(e,t){if(A)console[e](`[${e}] :: ${(new Date).toLocaleTimeString()} :: `,...t);else{switch(e){case"log":case"assert":return}console[e](`[${e}] :: ${(new Date).toLocaleTimeString()} :: `,...t)}}const P={log(){x("log",arguments)},error(){x("error",arguments)},warn(){x("warn",arguments)},assert(){x("assert",arguments)},trace(){x("trace",arguments)}},T=i.create({baseURL:K,timeout:8e3});const I=new class{async getAllKeeps(){const e=await T.get("api/keeps");P.log("da keeps",e.data),_.keeps=e.data}async getKeepsById(e){const t=await T.get("api/profiles/"+e+"/keeps");P.log("da profile keeps",t.data),_.keeps=t.data}async getKeepsByVaultId(e){const t=await T.get("api/vaults/"+e+"/keeps");P.log("da vault_keeps",t.data),_.keeps=t.data}async createKeep(e){const t=await T.post("api/keeps",e);P.log(t.data)}async deleteKeep(e){await T.delete("api/keeps/"+e),_.keeps=_.keeps.filter((t=>t.id!==e))}async deleteVaultKeep(e){await T.delete("api/vaultkeeps/"+e),_.keeps=_.keeps.filter((t=>t.id!==e))}setActiveKeep(e){const t=_.keeps.find((t=>t.id===e));P.log("active keep",t),_.activeKeep=t}async addToVault(e){const t=await T.post("api/vaultkeeps",e);P.log(t.data)}async viewCount(e,t){t.views=t.views+=1;const a=await T.put("api/keeps/views/"+e,t);P.log(a.data),_.keeps=_.keeps.filter((t=>t.id!==e)),_.keeps=[..._.keeps,a.data]}};const C={setup(){const a=e({newKeep:{id:_.activeKeep.id}});return{state:a,activeKeep:t((()=>_.activeKeep)),vaults:t((()=>_.vaults)),keeps:t((()=>_.keeps)),async addToVault(e){a.newKeep.vaultId=e,a.newKeep.keepId=_.activeKeep.id,await I.addToVault(a.newKeep)}}}},E=v("data-v-253e7af2");c("data-v-253e7af2");const j={class:"modal",id:"activeKeepModal",tabindex:"-1",role:"dialog","aria-labelledby":"activeKeepModalTitle","aria-hidden":"true"},O={class:"modal-dialog modal-dialog-centered",role:"document"},S={class:"comment-form modal-content"},D={class:"row"},R={class:"col-6"},L={class:"modal-title text-dark",id:"exampleModalLongTitle"},M={class:"col-6"},H=l("button",{type:"button",class:"close text-dark","data-dismiss":"modal","aria-label":"Close",title:"close task"}," x ",-1),z={class:"pt-5 text-center"},$={class:"p-3"},B={class:"row"},U={class:"col-12 problem-child d-flex align-items-end"},q={class:"dropdown px-5 "},N=l("button",{class:" btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",title:"Add to vault"}," Add to Vault... ",-1),W={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"};r();const Y=E(((e,t,n,i,c,r)=>(a(),s("div",j,[l("div",O,[l("div",S,[l("div",D,[l("div",R,[l("h5",L,[l("img",{src:i.activeKeep.img,class:"rounded img-fluid"},null,8,["src"])])]),l("div",M,[H,d(" Views: "+u(i.activeKeep.views)+" Keeps: "+u(i.activeKeep.keeps)+" ",1),l("div",z,[l("h2",null,u(i.activeKeep.name),1)]),l("div",$,u(i.activeKeep.description),1),l("div",B,[l("div",U,[l("div",q,[N,l("div",W,[(a(!0),s(o,null,p(i.vaults,(e=>(a(),s("a",{class:"dropdown-item",key:e.id,onClick:t=>i.addToVault(e.id),title:e.name},u(e.name),9,["onClick","title"])))),128))])])])])])])])])]))));C.render=Y,C.__scopeId="data-v-253e7af2";var F=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:C});const G=new class{setActiveProfile(e){const t=_.profile.find((t=>t.id===e));_.activeProfile=t,P.log("da profile",t)}async getProfileById(e){const t=await T.get("api/profiles/"+e);P.log("da profile",t.data),_.profile=t.data}};const J={props:{keep:{type:Object,required:!0}},setup:a=>({state:e({}),profile:t((()=>_.profile)),account:t((()=>_.account)),setActiveKeep(){I.setActiveKeep(a.keep.id),I.viewCount(a.keep.id,a.keep)},async deleteKeep(e){confirm("do you really want to delete")&&await I.deleteKeep(e)},setActiveProfile(){G.setActiveProfile(a.profile.id)}})},Q=v("data-v-97daf0cc");c("data-v-97daf0cc");const X={class:"d-flex align-items-end justify-content-center mx-1"},Z={class:"keep-name text-light text-center rounded shadow p-1"};r();const ee=Q(((e,t,o,i,c,r)=>{const p=n("router-link");return a(),s("div",{class:"row keep-bg rounded shadow",style:{backgroundImage:`url(${o.keep.img})`},onClick:t[1]||(t[1]=(...e)=>i.setActiveKeep&&i.setActiveKeep(...e)),"data-toggle":"modal","data-target":"#activeKeepModal"},[l("div",X,[l("h5",Z,[d(u(o.keep.name)+" ",1),l(p,{to:{name:"Profile",params:{id:o.keep.creatorId}},onClick:i.setActiveProfile},{default:Q((()=>[l("img",{class:"rounded-circle",src:o.keep.creator.picture,height:"30"},null,8,["src"])])),_:1},8,["to","onClick"])])])],4)}));J.render=ee,J.__scopeId="data-v-97daf0cc";var te=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:J});let ae;const se={},le=function(e,t){if(!t||0===t.length)return e();if(void 0===ae){const e=document.createElement("link").relList;ae=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in se)return;se[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":ae,t||(s.as="script",s.crossOrigin=""),s.href=e,document.head.appendChild(s),t?new Promise(((e,t)=>{s.addEventListener("load",e),s.addEventListener("error",t)})):void 0}))).then((()=>e()))};function oe(e){return()=>function(e){switch(e){case"./pages/AboutPage.vue":return le((()=>import("./AboutPage.271a4aaf.js")),["/assets/AboutPage.271a4aaf.js","/assets/vendor.55f09c39.js"]);case"./pages/AccountPage.vue":return le((()=>import("./AccountPage.d1273656.js")),["/assets/AccountPage.d1273656.js","/assets/AccountPage.8b59a14e.css","/assets/vendor.55f09c39.js"]);case"./pages/HomePage.vue":return le((()=>import("./HomePage.f0eb01a3.js")),["/assets/HomePage.f0eb01a3.js","/assets/HomePage.a10e1009.css","/assets/vendor.55f09c39.js"]);case"./pages/ProfilePage.vue":return le((()=>import("./ProfilePage.f4caa992.js")),["/assets/ProfilePage.f4caa992.js","/assets/ProfilePage.9275d2c4.css","/assets/vendor.55f09c39.js"]);case"./pages/VaultsPage.vue":return le((()=>import("./VaultsPage.554c2be2.js")),["/assets/VaultsPage.554c2be2.js","/assets/VaultsPage.b4afc8de.css","/assets/vendor.55f09c39.js"]);default:return Promise.reject(new Error("Unknown variable dynamic import: "+e))}}(`./pages/${e}.vue`)}const ne=[{path:"/",name:"Home",component:oe("HomePage")},{path:"/profile/:id",name:"Profile",component:oe("ProfilePage")},{path:"/vaults/:id",name:"Vault",component:oe("VaultsPage"),beforeEnter:f},{path:"/account",name:"Account",component:oe("AccountPage"),beforeEnter:k}],ie=g({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:m(),routes:ne});const ce=new class{async getAccount(){try{const e=await T.get("/account");_.account=e.data}catch(e){P.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}},re=w({domain:"muirkat.us.auth0.com",clientId:"JvwRXQ6GzzgojwDiCI1jmrK8vR0zCstw",audience:"https://endgame.com",useRefreshTokens:!0,onRedirectCallback:e=>{ie.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}});async function de(e){if(!re.isAuthenticated)return e;const t=1e3*re.identity.exp,a=t<Date.now(),s=t<Date.now()+432e5;return a?await re.loginWithPopup():s&&(await re.getTokenSilently(),T.defaults.headers.authorization=re.bearer),e}re.on(re.AUTH_EVENTS.AUTHENTICATED,(async function(){T.defaults.headers.authorization=re.bearer,T.interceptors.request.use(de),_.user=re.user,await ce.getAccount()}));const ue={setup:()=>({state:e({dropOpen:!1}),user:t((()=>_.user)),async login(){re.loginWithPopup()},async logout(){re.logout({returnTo:window.location.origin})}})},pe=v("data-v-714e6faa");c("data-v-714e6faa");const ve={class:"navbar navbar-expand-lg navbar-dark bg-primary"},ge=l("div",{class:"d-flex flex-column align-items-center"},[l("img",{alt:"logo",src:"/assets/keepr.e963a68f.jpeg",height:"45",class:"rounded-circle"})],-1),me=l("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[l("span",{class:"navbar-toggler-icon"})],-1),fe={class:"collapse navbar-collapse",id:"navbarText"},ke={class:"navbar-nav mr-auto"},we={class:"nav-item"},be=d(" Home "),ye={class:"navbar-text"},he={key:1,class:"dropdown"},_e={class:"mx-3"},Ve=l("div",{class:"list-group-item list-group-item-action hoverable"}," Account ",-1);r();const Ae=pe(((e,t,o,i,c,r)=>{const d=n("router-link");return a(),s("nav",ve,[l(d,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:pe((()=>[ge])),_:1}),me,l("div",fe,[l("ul",ke,[l("li",we,[l(d,{to:{name:"Home"},class:"nav-link"},{default:pe((()=>[be])),_:1})])]),l("span",ye,[i.user.isAuthenticated?(a(),s("div",he,[l("div",{class:"dropdown-toggle",onClick:t[2]||(t[2]=e=>i.state.dropOpen=!i.state.dropOpen)},[l("img",{src:i.user.picture,alt:"user photo",height:"40",class:"rounded"},null,8,["src"]),l("span",_e,u(i.user.name),1)]),l("div",{class:["dropdown-menu p-0 list-group w-100",{show:i.state.dropOpen}],onClick:t[4]||(t[4]=e=>i.state.dropOpen=!1)},[l(d,{to:{name:"Account"}},{default:pe((()=>[Ve])),_:1}),l("div",{class:"list-group-item list-group-item-action hoverable",onClick:t[3]||(t[3]=(...e)=>i.logout&&i.logout(...e))}," logout ")],2)])):(a(),s("button",{key:0,class:"btn btn-outline-primary text-uppercase",onClick:t[1]||(t[1]=(...e)=>i.login&&i.login(...e))}," Login "))])])])}));ue.render=Ae,ue.__scopeId="data-v-714e6faa";var Ke=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ue});const xe=new class{async getVaults(){const e=await T.get("api/vaults");P.log("da vaults",e.data),_.vaults=e.data}async getVaultsById(e){const t=await T.get("api/profiles/"+e+"/vaults");P.log("da vaults",t.data),_.vaults=t.data}async createVault(e){const t=await T.post("api/vaults",e);P.log(t.data)}async deleteVault(e){await T.delete("api/vaults/"+e),_.vaults=_.vaults.filter((t=>t.id!==e))}setActiveVault(e){const t=_.vault.find((t=>t.id===e));_.activeVault=t,P.log("da vault",t)}async getVaultById(e){try{const t=await T.get("api/vaults/"+e);P.log("da vault",t.data),_.vault=t.data}catch(t){ie.push({name:"Home"})}}};const Pe={props:{vault:{type:Object,required:!0}},setup:a=>({state:e({}),account:t((()=>_.account)),async deleteVault(e){confirm("do you really want to delete")&&await xe.deleteVault(e)},setActiveVault(){xe.setActiveVault(a.vault.id)}})},Te=v("data-v-7bc142f4");c("data-v-7bc142f4");const Ie={key:0,class:"vault-bg"},Ce={class:"Vault card m-3 shadow"},Ee={class:"p-3 my-3"},je={class:"vault-name text-primary text-center"},Oe={class:"d-flex justify-content-center"},Se={key:1,class:"vault-bg"},De={class:"Vault card m-3 shadow"},Re={class:"p-3 my-3"},Le={class:"vault-name text-primary text-center"},Me=l("div",null,[l("p",null,"Private man!")],-1),He={class:"d-flex justify-content-center"};r();const ze=Te(((e,t,i,c,r,d)=>{const p=n("router-link");return a(),s(o,null,[0==i.vault.isPrivate?(a(),s("div",Ie,[l(p,{to:{name:"Vault",params:{id:i.vault.id}},onClick:c.setActiveVault},{default:Te((()=>[l("div",Ce,[l("div",Ee,[l("h5",je,[l("u",null,u(i.vault.name),1)])])])])),_:1},8,["to","onClick"]),l("div",Oe,[i.vault.creatorId===c.account.id?(a(),s("button",{key:0,onClick:t[1]||(t[1]=e=>c.deleteVault(i.vault.id)),class:"btn btn-danger",title:"Delete Vault"}," Delete ")):b("",!0)])])):b("",!0),1==i.vault.isPrivate?(a(),s("div",Se,[l(p,{to:{name:"Vault",params:{id:i.vault.id}},onClick:c.setActiveVault},{default:Te((()=>[l("div",De,[l("div",Re,[l("h5",Le,[l("u",null,u(i.vault.name),1),Me])])])])),_:1},8,["to","onClick"]),l("div",He,[i.vault.creatorId===c.account.id?(a(),s("button",{key:0,onClick:t[2]||(t[2]=e=>c.deleteVault(i.vault.id)),class:"btn btn-danger",title:"Delete Vault"}," Delete ")):b("",!0)])])):b("",!0)],64)}));Pe.render=ze,Pe.__scopeId="data-v-7bc142f4";var $e=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Pe});const Be={props:{keep:{type:Object,required:!0},profile:{type:Object,required:!0}},setup(a){const s=y();return{state:e({}),account:t((()=>_.account)),setActiveKeep(){I.setActiveKeep(a.keep.id),I.viewCount(a.keep.id,a.keep)},async deleteVaultKeep(e){confirm("do you really want to delete")&&(await I.deleteVaultKeep(e),await I.getKeepsByVaultId(s.params.id))}}}},Ue=v("data-v-916753f6");c("data-v-916753f6");const qe={class:"d-flex align-items-end justify-content-center mx-1"},Ne=l("div",null,null,-1),We={class:"keep-name text-light text-center rounded shadow p-1"};r();const Ye=Ue(((e,t,o,n,i,c)=>(a(),s("div",{class:"row keep-bg rounded shadow",style:{backgroundImage:`url(${o.keep.img})`},onClick:t[2]||(t[2]=(...e)=>n.setActiveKeep&&n.setActiveKeep(...e)),"data-toggle":"modal","data-target":"#activeKeepModal"},[l("div",qe,[Ne,l("h5",We,[d(u(o.keep.name)+" ",1),l("div",null,[o.keep.creatorId===n.account.id?(a(),s("button",{key:0,onClick:t[1]||(t[1]=e=>n.deleteVaultKeep(o.keep.vaultKeepId)),class:"",title:"Delete Vault"}," x ")):b("",!0)])])])],4))));Be.render=Ye,Be.__scopeId="data-v-916753f6";var Fe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Be});const Ge=h(V);!function(e){const t={"./components/ActiveKeep.vue":F,"./components/Keep.vue":te,"./components/Navbar.vue":Ke,"./components/Vault.vue":$e,"./components/VaultKeep.vue":Fe};Object.entries(t).forEach((([t,a])=>{const s=a.name||t.substr(t.lastIndexOf("/")+1).replace(/\.\w+$/,"");e.component(s,a.default)}))}(Ge),Ge.use(ie).mount("#app");export{_ as A,I as k,G as p,xe as v};
